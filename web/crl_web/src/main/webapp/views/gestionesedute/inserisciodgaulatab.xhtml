<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<pe:tooltip value="Click per Espandere / Comprimere"
	forSelector="legend" shared="true" targetPosition="top center"
	position="left center" />

<p:fieldset styleClass="fieldSetTab"
	legend="Atti di Sindacato Ispettivo e di Indirizzo" collapsed="false"
	toggleable="false">

	<p:row>
		<p:column colspan="4">

			<!-- Messaggio azioni -->
			<p:growl id="attiIndirizzoMsg" showDetail="true" sticky="false" />

			<!-- Confirm dialog -->
			<p:confirmDialog id="confirmCollegamentoAttoSindacatoDialog"
				message="Sei sicuro di voler eliminare il Collegamento ?"
				header="Cancellazione Collegamento" severity="alert"
				widgetVar="collegamentoAttoSindacatoDialog">

				<p:commandButton id="confirmAttoSindacatoCollegamento"
					value="Conferma"
					oncomplete="collegamentoAttoSindacatoDialog.hide()"
					action="#{gestioneSeduteController.removeCollegamentoAttoSindacato}"
					update="listaCollegamentiAttiSindacati" />
				<p:commandButton id="declineCollegamentoAttoSindacato"
					value="Annulla" onclick="collegamentoAttoSindacatoDialog.hide()"
					type="button" />
			</p:confirmDialog>



			<p:panelGrid id="addAttoSindacatoPanel" styleClass="tableAppend">
				<f:facet name="header">
					<p:row>
						<p:column>Tipo</p:column>
						<p:column>N. Atto</p:column>
						<p:column>Descrizione</p:column>
						<p:column>Azioni</p:column>
					</p:row>
				</f:facet>
				<p:row>


					<p:column>
						<p:selectOneMenu id="tipoAttoSindacato"
							value="#{gestioneSeduteController.tipoAttoSindacato}">
							<f:selectItem itemLabel="Scegli tipo Atto" itemValue="" />
							<f:selectItems
								value="#{gestioneSeduteController.tipiAttoSindacato}" />
							<p:ajax update="numAttoSindacato"
								listener="#{gestioneSeduteController.handleAttoSindacatoChange}" />
						</p:selectOneMenu>
					</p:column>


					<p:column>
						<p:selectOneMenu id="numAttoSindacato"
							value="#{gestioneSeduteController.idAttoSindacato}">
							<f:selectItem itemLabel="Scegli numero Atto" itemValue="" />
							<f:selectItems itemValue="#{attoSind.idAtto}" var="attoSind"
								value="#{gestioneSeduteController.numeriAttoSindacato}"
								itemLabel="#{attoSind.numeroAtto} - #{attoSind.oggettoAtto}" />
						</p:selectOneMenu>
					</p:column>

					<p:column>
						<p:inputText
							value="#{gestioneSeduteController.descrizioneAttoSindacato}"
							style="width:100%" />
					</p:column>


					<p:column>
						<p:commandButton value="Aggiungi"
							action="#{gestioneSeduteController.addCollegamentoAttoSindacato}"
							id="addCollegamentoAttoSindacato"
							update="listaCollegamentiAttiSindacati, inserisciOdgMsg"
							icon="new-icon" />
					</p:column>

				</p:row>

			</p:panelGrid>
			<br />

		</p:column>
	</p:row>

	<p:row style="height:20px">

	</p:row>

	<p:row>
		<p:column>

			<p:dataTable id="listaCollegamentiAttiSindacati" styleClass="generalInfoTab grey-text"
				value="#{gestioneSeduteController.collegamentiAttiSindacato}"
				var="collegamento" editable="true">




				<p:column headerText="" style="width:20px">
					<p:graphicImage value="/resources/img/dad.jpeg" />

				</p:column>

				<p:column headerText="Tipo Atto" style="width:125px">
							#{collegamento.tipoAtto}
    			</p:column>

				<p:column headerText="N.Atto" style="width:125px">
					#{collegamento.numeroAtto}
				</p:column>

				<p:column headerText="Oggetto" style="width:125px">
				#{collegamento.oggettoAtto}
			</p:column>


				

				<p:column headerText="Firmatari" style="width:125px">

                  				

					#{collegamento.firmatariList}


				</p:column>

				<p:column headerText="Descrizione" style="width:125px">
			#{collegamento.descrizione}
			</p:column>

				<p:column headerText="Azioni" style="width:125px">

					<p:commandButton
						oncomplete="collegamentoAttoSindacatoDialog.show()"
						icon="delete-icon">
						<f:setPropertyActionListener value="#{collegamento.idAtto}"
							target="#{gestioneSeduteController.attoSindacatoToDelete}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>

			<p:inputText type="hidden" id="hidSindOrder"
				value="#{gestioneSeduteController.attiSindacatoTrattatiorder}">
			</p:inputText>

			<script>
				jQuery(function() {
					jQuery(
							'#gestioneSeduteForm\\:gestioneSedute\\:listaCollegamentiAttiSindacati_data')
							.sortable(
									{
										update : function() {
											dragSortTable(
													'gestioneSeduteForm:gestioneSedute:listaCollegamentiAttiSindacati_data',
													'gestioneSeduteForm:gestioneSedute:hidSindOrder',
													'2');
										}
									});
				});
			</script>
		</p:column>
	</p:row>
</p:fieldset>

</html>