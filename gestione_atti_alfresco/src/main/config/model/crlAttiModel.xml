<?xml version="1.0" encoding="UTF-8"?>

<model name="crlatti:gestioneAttiModel" xmlns="http://www.alfresco.org/model/dictionary/1.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.alfresco.org/model/dictionary/1.0 modelSchema.xsd">

	<description>CRL Gestione Atti Model</description>
	<author>Sourcesense</author>
	<version>1.0</version>

	<imports>
		<import uri="http://www.alfresco.org/model/dictionary/1.0"
			prefix="d" />
		<import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
	</imports>

	<namespaces>
		<namespace uri="http://www.regione.lombardia.it/content/model/atti/1.0"
			prefix="crlatti" />
	</namespaces>

	<types>
		<type name="crlatti:atto">
			<title>Atto</title>
			<parent>cm:folder</parent>
			<properties>
				<property name="crlatti:descrizioneIniziativa">
					<title>Descrizione iniziativa</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:numeroRepertorio">
					<title>Numero repertorio</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataRepertorio">
					<title>Data repertorio</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:classificazione">
					<title>Classificazione</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:legislatura">
					<title>Legislatura</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:statoAtto">
					<title>Stato</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:numeroAtto">
					<title>Numero</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataIniziativa">
					<title>Data iniziativa</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:numeroProtocollo">
					<title>Numero protocollo</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:tipoIniziativa">
					<title>Tipo iniziativa</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:numeroDcr">
					<title>Numero DCR</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:oggetto">
					<title>Oggetto</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:tipoChiusura">
					<title>Tipo chiusura</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataPubblicazione">
					<title>Data pubblicazione</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:esitoVotoComRef">
					<title>Esito voto com ref</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataSedutaSc">
					<title>Data seduta sc</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:esitoVotoAula">
					<title>Esito voto aula</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataSedutaComm">
					<title>Data seduta comm</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:commReferente">
					<title>Commissione referente</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataSedutaAula">
					<title>Data seduta aula</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:commConsultiva">
					<title>Commissione consultiva</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:relatori">
					<title>Relatori</title>
					<type>d:text</type>
					<multiple>true</multiple>
				</property>
				<property name="crlatti:redigente">
					<title>Redigente</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:deliberante">
					<title>Deliberante</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:organismoStatutario">
					<title>Organismo statutario</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:numeroLcr">
					<title>Numero LCR</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:soggettoConsultato">
					<title>Soggetto consultato</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:numeroLr">
					<title>Numero LR</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:anno">
					<title>Anno</title>
					<type>d:int</type>
				</property>
				<property name="crlatti:emendato">
					<title>Emendato</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:rinviato">
					<title>Rinviato</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:sospeso">
					<title>Sospeso</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:abbinamento">
					<title>Abbinamento</title>
					<type>d:boolean</type>
				</property>
				<property name="crlatti:stralcio">
					<title>Stralcio</title>
					<type>d:boolean</type>
				</property>
			</properties>
			<associations>
				<child-association name="crlatti:abbinamenti">
					<title>Abbinamenti</title>
					<source>
						<mandatory>false</mandatory>
						<many>true</many>
					</source>
					<target>
						<class>crlatti:abbinamento</class>
						<mandatory>false</mandatory>
						<many>true</many>
					</target>
				</child-association>
			</associations>
			<mandatory-aspects>
				<aspect>crlatti:tipizzabile</aspect>
			</mandatory-aspects>
		</type>
		
		<type name="crlatti:testo">
			<title>Testo</title>
			<parent>cm:content</parent>
			<mandatory-aspects>
				<aspect>crlatti:tipizzabile</aspect>
				<aspect>crlatti:pubblicabile</aspect>
			</mandatory-aspects>
		</type>
		
		<type name="crlatti:allegato">
			<title>Allegato</title>
			<parent>cm:content</parent>
			<mandatory-aspects>
				<aspect>crlatti:tipizzabile</aspect>
				<aspect>crlatti:pubblicabile</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:abbinamento">
			<title>Abbinamento</title>
			<parent>cm:content</parent>
			<properties>
				<property name="crlatti:tipoTestoAbbinamento">
					<title>Tipo testo</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataAbbinamento">
					<title>Data abbinamento</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataDisabbinamento">
					<title>Data disabbinamento</title>
					<type>d:date</type>
				</property>
			</properties>
			<associations>
				<child-association name="crlatti:attoAssociatoAbbinamento">
				<title>Atto associato</title>
				<source>
					<mandatory>false</mandatory>
					<many>true</many>
				</source>
				<target>
					<class>crlatti:atto</class>
					<mandatory>false</mandatory>
					<many>false</many>
				</target>
				</child-association>
			</associations>
		</type>

		<type name="crlatti:attoDoc">
			<title>Documento generico</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
				<aspect>crlatti:firmatariAspect</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoPdl">
			<title>Progetto di Legge</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
				<aspect>crlatti:firmatariAspect</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoInp">
			<title>Petizione popolare</title>
			<parent>crlatti:atto</parent>
		</type>

		<type name="crlatti:attoPar">
			<title>Parere</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoPda">
			<title>Proposta Atto Amministrativo</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
				<aspect>crlatti:firmatariAspect</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoPlp">
			<title>Proposta Legge Parlamentare</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
				<aspect>crlatti:firmatariAspect</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoPre">
			<title>Proposta di Regolamento</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoRef">
			<title>Proposta di Referendum</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
				<aspect>crlatti:firmatariAspect</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoRel">
			<title>Relazione</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:attoEac">
			<title>Elenchi di Atti Comunitari</title>
			<parent>crlatti:atto</parent>
			<mandatory-aspects>
				<aspect>crlatti:dgr</aspect>
			</mandatory-aspects>
		</type>

		<type name="crlatti:firmatario">
			<title>Firmatario</title>
			<parent>crlatti:firmatarioAnagrafica</parent>
			<properties>
				<property name="crlatti:nomeFirmatario">
					<title>Nome</title>
					<type>d:text</type>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
				<property name="crlatti:dataFirma">
					<title>Data firma</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataRitiro">
					<title>Data ritiro</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:isPrimoFirmatario">
					<title>Primo firmatario</title>
					<type>d:boolean</type>
				</property>
			</properties>
		</type>

		<!-- anagrafica -->

		<type name="crlatti:legislaturaAnagrafica">
			<title>Legislatura</title>
			<parent>cm:content</parent>
			<properties>
				<property name="crlatti:anni">
					<title>Anni</title>
					<type>d:int</type>
					<multiple>true</multiple>
				</property>
			</properties>
		</type>

		<type name="crlatti:firmatarioAnagrafica">
			<title>Firmatario Anagrafica</title>
			<parent>cm:content</parent>
			<properties>
				<property name="crlatti:gruppoConsiliare">
					<title>Gruppo Consiliare</title>
					<type>d:text</type>
				</property>
			</properties>
		</type>

		<type name="crlatti:commissione">
			<title>Commissione</title>
			<parent>cm:content</parent>
			<properties>
				<property name="crlatti:relatoriCommissione">
					<title>Relatori</title>
					<type>d:text</type>
					<multiple>true</multiple>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
				<property name="crlatti:dataAssegnazioneCommissione">
					<title>Data assegnazione</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataPresaInCaricoCommissione">
					<title>Data presa in carico</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataNominaCommissione">
					<title>Data nomina</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:membriComitatoRistrettoCommissione">
					<title>Membri comitato ristretto</title>
					<type>d:text</type>
					<multiple>true</multiple>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
				<property name="crlatti:dataAperturaLavoriComitatoCommissione">
					<title>Data apertura lavori comitato</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataChiusuraLavoriComitatoCommissione">
					<title>Data chiusura lavori comitato</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:tipoVotazioneCommissione">
					<title>Tipo votazione</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:esitoVotazioneCommissione">
					<title>Esito votazione</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataVotazioneCommissione">
					<title>Data votazione</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataTrasmissioneCommissione">
					<title>Data trasmissione</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:dataAnnulloCommissione">
					<title>Data annullo</title>
					<type>d:date</type>
				</property>
				<property name="crlatti:ruoloCommissione">
					<title>Ruolo</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:statoCommissione">
					<title>Stato</title>
					<type>d:text</type>
				</property>
			</properties>
		</type>

	</types>
	
	<aspects>
		
		<aspect name="crlatti:tipizzabile">
			<title>Tipizzabile</title>
			<properties>
				<property name="crlatti:tipologia">
					<title>Tipologia</title>
					<type>d:text</type>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>false</tokenised>
					</index>
				</property>
			</properties>
		</aspect>
		
		<aspect name="crlatti:pubblicabile">
			<title>Pubblicabile</title>
			<properties>
				<property name="crlatti:pubblico">
					<title>Pubblico</title>
					<type>d:boolean</type>
					<default>false</default>
				</property>
			</properties>
		</aspect>
		
		<aspect name="crlatti:dgr">
			<title>DGR</title>
			<properties>
				<property name="crlatti:numeroDgr">
					<title>Numero DGR</title>
					<type>d:text</type>
				</property>
				<property name="crlatti:dataDgr">
					<title>Data DGR</title>
					<type>d:date</type>
				</property>
			</properties>
		</aspect>
		
		<aspect name="crlatti:firmatariAspect">
			<title>Firmatari</title>
			<properties>
				<property name="crlatti:firmatari">
					<title>Firmatari</title>
					<type>d:text</type>
					<multiple>true</multiple>
				</property>
				<property name="crlatti:primoFirmatario">
					<title>Primo firmatario</title>
					<type>d:text</type>
				</property>
			</properties>
		</aspect>
		
	</aspects>

</model>