<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<p:panelGrid styleClass="infoTable" id="documentiallegatipanel">
	<p:row>
		<p:column colspan="3">
			<h:dataTable id="listaTestiUfficiali"
				value="#{attoBean.atto.testiAtto}" var="testoAtto"
				styleClass="generalInfoTab">


				<h:column>
					<f:facet name="header">Testo Dell'Atto</f:facet>
							#{testoAtto.nome}
						</h:column>

				<h:column>
					<f:facet name="header">Formato</f:facet>
					<!-- <h:outputText value="#{fn:substring(testoAtto.nome, fn:indexOf(testoAtto.nome,'.')+1 ,fn:length(testoAtto.nome) )}" /> -->
					<h:outputText value="#{testoAtto.mimetype}" />
				</h:column>

				<h:column>
					<f:facet name="header">Pubblico</f:facet>
					<h:outputText value="si" rendered="#{testoAtto.pubblico}" />
					<h:outputText value="no" rendered="#{!testoAtto.pubblico}" />
				</h:column>

				<h:column>
					<f:facet name="header">Download</f:facet>
					
						<p:commandButton id="downloadLink" icon="detail-icon" ajax="false"
						onclick="PrimeFaces.monitorDownload(start, stop)"
						>
						<f:setPropertyActionListener value="#{testoAtto.id}"
								target="#{fileDownloadController.fileId}" />
						<f:setPropertyActionListener value="#{testoAtto.nome}"
								target="#{fileDownloadController.fileName}" />
						<f:setPropertyActionListener value="#{testoAtto.mimetype}"
								target="#{fileDownloadController.fileMimetype}" />				
						<p:fileDownload value="#{fileDownloadController.file}" />
					</p:commandButton>

				</h:column>




				<!-- <h:column>
					<f:facet name="header">Testi Ufficiali:</f:facet>
					<h:commandLink>
						<h:graphicImage alt="pdf" value="/resources/img/pdf.png" />
					</h:commandLink>
					<h:commandLink>
						<h:graphicImage alt="word" value="/resources/img/word.png" />
					</h:commandLink>
					<h:commandLink>
						<h:graphicImage alt="html" value="/resources/img/html.png" />
					</h:commandLink>
				</h:column>

				<h:column>
					<f:facet name="header">Emendamenti:</f:facet>

					<h:commandLink>
						<h:graphicImage alt="pdf" value="/resources/img/pdf.png" />
					</h:commandLink>

				</h:column> -->


			</h:dataTable>
			<h:outputText value="Nessun Testo Atto"
				rendered="#{empty attoBean.atto.testiAtto}">
			</h:outputText>
		</p:column>
	</p:row>
	<p:row>
		<p:column colspan="3">
			<h:dataTable id="listaAltriAllegati"
				value="#{attoBean.atto.allegati}" var="allegato"
				styleClass="generalInfoTab">

				
				<h:column>
					<f:facet name="header">Altri Allegati</f:facet>
					#{allegato.nome}
				</h:column>

                <h:column>
					<f:facet name="header">Formato</f:facet>
					#{allegato.mimetype}
				</h:column>
                
				<h:column>
					<f:facet name="header">Download</f:facet>
					
						<p:commandButton id="downloadLink" icon="detail-icon" ajax="false"
						onclick="PrimeFaces.monitorDownload(start, stop)"
						>
						<f:setPropertyActionListener value="#{allegato.id}"
								target="#{fileDownloadController.fileId}" />
						<f:setPropertyActionListener value="#{allegato.nome}"
								target="#{fileDownloadController.fileName}" />
						<f:setPropertyActionListener value="#{allegato.mimetype}"
								target="#{fileDownloadController.fileMimetype}" />				
						<p:fileDownload value="#{fileDownloadController.file}" />
					</p:commandButton>

				</h:column>


			</h:dataTable>

			<h:outputText value="Nessun allegato"
				rendered="#{empty attoBean.atto.allegati}">
			</h:outputText>
		</p:column>
	</p:row>

	<p:row>
		<p:column colspan="3">
			<p>
				<b><u>Comitato Ristretto:</u> </b>
			</p>
			<p>
				<b><u>Consultazioni:</u> </b>
			</p>
			<p>
				<b><u>Pareri:</u> </b>
			</p>
		</p:column>
	</p:row>
</p:panelGrid>


</html>