<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:of="http://omnifaces.org/functions">





<c:choose>

	<c:when test="#{navigationBean.gestioneSeduteConsultazioniAula()}">
		<c:set var="numeroVerbale" value="Numero ODG"></c:set>
	</c:when>
	<c:otherwise>
		<c:set var="numeroVerbale" value="Numero Verbale"></c:set>
	</c:otherwise>
</c:choose>



<p:panelGrid styleClass="infoTable" id="inserisciSeduta">
	<p:row>

		<p:column style="width:50%;">
			<!-- Messaggio azioni -->
			<p:growl id="inserisciSedutaMsg" showDetail="true" sticky="false" />

			<!-- Confirm dialog -->
			<p:confirmDialog id="confirmSedutaDialog"
				message="Sei sicuro di voler eliminare la Seduta ?"
				header="Cancellazione Seduta" severity="alert"
				widgetVar="sedutaDialog">

				<p:commandButton id="confirmSeduta" value="Conferma"
					oncomplete="sedutaDialog.hide()"
					action="#{gestioneSeduteController.removeSeduta}"
					update=":gestioneSeduteForm" />
				<p:commandButton id="declineSeduta" value="Annulla"
					onclick="sedutaDialog.hide()" type="button" />

			</p:confirmDialog>

			<p:confirmDialog id="confirmLinkDialog"
				message="Sei sicuro di voler eliminare il Link?"
				header="Cancellazione Link" severity="alert" widgetVar="linkDialog">

				<p:commandButton id="confirmLink" value="Conferma"
					oncomplete="linkDialog.hide()"
					action="#{gestioneSeduteController.removeLink}" update="listaLinks" />
				<p:commandButton id="declineLink" value="Annulla"
					onclick="linkDialog.hide()" type="button" />

			</p:confirmDialog>



			<p:fieldset styleClass="fieldSetTab" legend="Elenco sedute:"
				collapsed="false" toggleable="false">


				<p:scrollPanel
					style="width:430px;height:450px;border:0px;text-align:left;"
					scrollMode="native">  				


					Filtra data:&nbsp;&nbsp;&nbsp;
					<h:outputLabel for="filtraData_da" value="da " />
					<p:calendar id="filtraData_da"
						value="#{gestioneSeduteController.dataSedutaDa}" locale="it"
						pattern="dd/MM/yyyy" size="10">
						<p:ajax event="dateSelect" global="false"
							listener="#{gestioneSeduteController.filterDataTable()}"
							update="listaSedute" />
					</p:calendar>

					<h:outputLabel for="filtraData_a" value="a " />
					<p:calendar id="filtraData_a"
						value="#{gestioneSeduteController.dataSedutaA}" locale="it"
						pattern="dd/MM/yyyy" size="10">
						<p:ajax event="dateSelect" global="false"
							listener="#{gestioneSeduteController.filterDataTable()}"
							update="listaSedute" />
					</p:calendar>




					<br />
					<br />

					<p:row>
						<p:column colspan="3">

							<p:dataTable id="listaSedute"
								value="#{gestioneSeduteController.seduteList}" var="seduta"
								styleClass="generalInfoTab grey-text" editable="true"
								style="width:100%">

								<p:column headerText="Dettagli" style="width:50px">
									<p:commandButton
										action="#{gestioneSeduteController.showSedutaDetail}"
										icon="detail-icon"
										update=":gestioneSeduteForm:gestioneSedute:dettagliSeduta">
										<f:setPropertyActionListener
											value="#{of:formatDate(seduta.dataSeduta,'dd/MM/yyyy')}"
											target="#{gestioneSeduteController.dataSedutaSelected}" />
									</p:commandButton>
								</p:column>

								<p:column headerText="Data Seduta" style="width:100px"
									sortBy="#{of:formatDate(seduta.dataSeduta,'dd/MM/yyyy')}">
									
									#{of:formatDate(seduta.dataSeduta,'dd/MM/yyyy')}
									
								</p:column>



								<p:column headerText="#{numeroVerbale}" style="width:100px"
									sortBy="#{seduta.numVerbale}">
									#{seduta.numVerbale}
								</p:column>

								<p:column headerText="Azioni" style="width:130px">

									<p:commandButton
										action="#{gestioneSeduteController.dettaglioOdg}"
										oncomplete="gestioneSeduteTabs.select(1)" value="ODG"
										update=":gestioneSeduteForm:gestioneSedute">
										
										<f:setPropertyActionListener
											value="#{of:formatDate(seduta.dataSeduta,'dd/MM/yyyy')}"
											target="#{gestioneSeduteController.dataSedutaSelected}" />
										
									</p:commandButton>	
										
									&nbsp;

									<p:commandButton oncomplete="sedutaDialog.show()"
										icon="delete-icon">

										<f:setPropertyActionListener value="#{seduta.dataSeduta}" 
											target="#{gestioneSeduteController.sedutaToDelete}" />
									</p:commandButton>
								</p:column>

							</p:dataTable>
						</p:column>
					</p:row>

				</p:scrollPanel>
			</p:fieldset>
		</p:column>
		<p:column>

			<p:fieldset styleClass="fieldSetTab" legend="Dettagli seduta:"
				collapsed="false" toggleable="false">
				<p:panelGrid id="dettagliSeduta"
					style="width:100%;margin-bottom:7px;">
					<p:row>
						<p:column style="text-align:left;">


							<h:outputLabel for="dataSeduta" value="Data seduta:  " />
						</p:column>
						<p:column style="text-align:left;">
							<p:calendar size="10" locale="it" id="dataSeduta"
								value="#{gestioneSeduteController.dataSeduta}">
								<p:ajax event="dateSelect" global="false"
									listener="#{gestioneSeduteController.updateInserisciSedutaHandler}" />
							</p:calendar>
						</p:column>
					</p:row>
					<p:row>
						<p:column style="text-align:left;">
							<h:outputLabel for="numVerbale" value="#{numeroVerbale} : " />
						</p:column>
						<p:column style="text-align:left;">
							<p:inputText size="10" id="numVerbale"
								value="#{gestioneSeduteController.numVerbale}">
								<p:ajax event="change" global="false"
									listener="#{gestioneSeduteController.updateInserisciSedutaHandler}" />
							</p:inputText>

						</p:column>
					</p:row>


					<p:row>
						<p:column colspan="2" style="text-align:left;">
			         	Dalle ore : &nbsp; 
			         	<p:calendar size="5" locale="it" pattern="HH:mm" value="#{gestioneSeduteController.dalleOre}"></p:calendar>
						
				        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alle ore : &nbsp;&nbsp;&nbsp; 
				        &nbsp;&nbsp;&nbsp;
				         <p:calendar size="5" locale="it" pattern="HH:mm" value="#{gestioneSeduteController.alleOre}"></p:calendar>
						</p:column>
					</p:row>


					<p:row>
						<p:column colspan="2" style="text-align:left;">
				Note : 
				<br />
							<br />
							<p:inputTextarea rows="5" cols="53"
								value="#{gestioneSeduteController.note}">
								<p:ajax event="change" global="false"
									listener="#{gestioneSeduteController.updateInserisciSedutaHandler}" />
							</p:inputTextarea>
						</p:column>
					</p:row>
					<p:row>
						<p:column colspan="4" style="text-align:left;">
							<p:panelGrid id="addLinkPanel" styleClass="tableAppend">

								<f:facet name="header">
									<p:row>
										<p:column>Descrizione collegamento</p:column>
										<p:column>Indirizzo collegamento</p:column>
										<p:column></p:column>
									</p:row>
								</f:facet>
								<p:row>
									<p:column>
										<p:inputText id="link"
											value="#{gestioneSeduteController.nomeLink}" />

									</p:column>

									<p:column>
										<p:inputText id="urllink"
											value="#{gestioneSeduteController.urlLink}" />
									</p:column>

									<p:column>
										<p:commandButton value="Aggiungi"
											action="#{gestioneSeduteController.addLink}" id="addLink"
											update="listaLinks , inserisciSedutaMsg" icon="new-icon" />
									</p:column>

								</p:row>
							</p:panelGrid>


						</p:column>
					</p:row>

					<p:row>
						<p:column colspan="4" style="text-align:left;">

							<p:dataTable id="listaLinks"
								value="#{gestioneSeduteController.linksList}" var="link"
								styleClass="generalInfoTab grey-text" editable="true">

								<p:column sortBy="#{link.descrizione}"
									headerText="Descrizione collegamento">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{link.descrizione}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{link.descrizione}" style="width:100%">

											</p:inputText>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column headerText="Indirizzo collegamento"
										sortBy="#{link.indirizzo}">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputLink  value="http://#{link.indirizzo}"  target="_blank">
													<h:outputText value="#{link.indirizzo}" />
												</h:outputLink>
											</f:facet>
											<f:facet name="input">
												<p:inputText value="#{link.indirizzo}" style="width:100%">

												</p:inputText>
											</f:facet>
										</p:cellEditor>


									</p:column>


								<p:column headerText="Elimina">


									<p:commandButton oncomplete="linkDialog.show()"
										icon="delete-icon">

										<f:setPropertyActionListener value="#{link.descrizione}"
											target="#{gestioneSeduteController.linkToDelete}" />
									</p:commandButton>
								</p:column>

								<p:column headerText="Modifica" style="width:50px">
									<p:rowEditor />
								</p:column>

							</p:dataTable>
						</p:column>
					</p:row>
					<p:row>
						<p:column style="text-align:left;">
							<p>
								<p:commandButton value="Aggiungi / Salva"
									action="#{gestioneSeduteController.salvaAggiungiSeduta}"
									update=":gestioneSeduteForm">
									
								</p:commandButton>
							</p>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:fieldset>

		</p:column>
	</p:row>

</p:panelGrid>
</html>