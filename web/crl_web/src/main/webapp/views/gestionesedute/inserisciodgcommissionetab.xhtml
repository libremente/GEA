<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">



<p:row>
	<p:column>

		<!-- Messaggio azioni -->
		<p:growl id="attiIndirizzoMsg" showDetail="true" sticky="false" />

		<!-- Confirm dialog -->
		<p:confirmDialog id="confirmCollegamentoAttoSindacatoDialog"
			message="Sei sicuro di voler eliminare il Collegamento ?"
			header="Cancellazione Collegamento" severity="alert"
			widgetVar="collegamentoAttoSindacatoDialog">

			<p:commandButton id="confirmAttoSindacatoCollegamento"
				value="Conferma" oncomplete="collegamentoAttoSindacatoDialog.hide()"
				action="#{gestioneSeduteController.removeCollegamentoAttoSindacato}"
				update="listaCollegamentiAttiSindacati" />
			<p:commandButton id="declineCollegamentoAttoSindacato"
				value="Annulla" onclick="collegamentoAttoSindacatoDialog.hide()"
				type="button" />
		</p:confirmDialog>


		<!-- Confirm dialog -->
		<p:confirmDialog id="confirmConsultazioneAttoDialog"
			message="Sei sicuro di voler eliminare la Consultazione ?"
			header="Cancellazione Consultazione Atto" severity="alert"
			widgetVar="consultazioneAttoDialog">

			<p:commandButton id="confirmConsultazioneAtto" value="Conferma"
				oncomplete="consultazioneAttoDialog.hide()"
				action="#{gestioneSeduteController.removeAttoConsultato}"
				update="listaConsultazioniAtti" />
			<p:commandButton id="declineConsultazioneAtto" value="Annulla"
				onclick="consultazioneAttoDialog.hide()" type="button" />

		</p:confirmDialog>

		<p:confirmDialog id="confirmAudizioneDialog"
			message="Sei sicuro di voler eliminare l'Audizione?"
			header="Cancellazione Audizione" severity="alert"
			widgetVar="audizioneDialog">

			<p:commandButton id="confirmAudizione" value="Conferma"
				oncomplete="audizioneDialog.hide()"
				action="#{gestioneSeduteController.removeAudizione}"
				actionListener="#{gestioneSeduteController.updateInserisciOdgHandler}"
				update="listaAudizioni" />
			<p:commandButton id="declineAudizione" value="Annulla"
				onclick="audizioneDialog.hide()" type="button" />

		</p:confirmDialog>



		<p:fieldset styleClass="fieldSetTab"
			legend="Consultazioni / Audizioni sugli atti " collapsed="false"
			toggleable="false">
			<p:dataTable id="listaConsultazioniAtti"
				value="#{gestioneSeduteController.consultazioniAtti}"
				var="consultazioneAtto" styleClass="generalInfoTab grey-text"
				editable="true">

				<p:column headerText="Tipo Atto" style="width:125px">
							#{consultazioneAtto.tipoAtto}
    			</p:column>

				<p:column headerText="N.Atto" style="width:125px">
					#{consultazioneAtto.numeroAtto}
				</p:column>

				<p:column headerText="Soggetto Consultato" style="width:125px">
					#{consultazioneAtto.descrizione}					
				</p:column>

				<p:column headerText="Previsto" style="width:125px">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="si" rendered="#{consultazioneAtto.prevista}" />
							<h:outputText value="no"
								rendered="#{!consultazioneAtto.prevista}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{consultazioneAtto.prevista}">
								<p:ajax event="change" global="false"
									listener="#{gestioneSeduteController.updateInserisciOdgHandler}" />
							</p:selectBooleanCheckbox>
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Discusso" style="width:125px">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="si" rendered="#{consultazioneAtto.discussa}" />
							<h:outputText value="no"
								rendered="#{!consultazioneAtto.discussa}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{consultazioneAtto.discussa}">
								<p:ajax event="change" global="false"
									listener="#{gestioneSeduteController.updateInserisciOdgHandler}" />
							</p:selectBooleanCheckbox>
						</f:facet>
					</p:cellEditor>
				</p:column>



				<p:column headerText="Modifica" style="width:50px">
					<p:rowEditor />
				</p:column>

			</p:dataTable>
		</p:fieldset>

	</p:column>
</p:row>

<p:row>
	<p:column>
		<p:fieldset styleClass="fieldSetTab"
			legend="Consultazioni / Audizioni generali " collapsed="false"
			toggleable="false">
			<p:panelGrid id="addAudizionePanel" styleClass="tableAppend">

				<f:facet name="header">
					<p:row>
						<p:column>Soggetto Partecipante</p:column>
						<p:column>Previsto</p:column>
						<p:column>Discusso</p:column>
						<p:column></p:column>
					</p:row>
				</f:facet>
				<p:row>
					<p:column>
						<p:inputText
							value="#{gestioneSeduteController.soggettoPartecipante}" />
					</p:column>

					<p:column>
						<p:selectBooleanCheckbox
							value="#{gestioneSeduteController.previsto}" />
					</p:column>

					<p:column>
						<p:selectBooleanCheckbox
							value="#{gestioneSeduteController.discusso}" />
					</p:column>

					<p:column>
						<p:commandButton value="Aggiungi"
							action="#{gestioneSeduteController.addAudizione}"
							id="addAudizione" update="listaAudizioni , inserisciOdgMsg"
							icon="new-icon" />
					</p:column>

				</p:row>
			</p:panelGrid>

			<br />

			<p:dataTable id="listaAudizioni"
				value="#{gestioneSeduteController.audizioni}" var="audizione"
				styleClass="generalInfoTab grey-text" editable="true">

				<p:column headerText="Soggetto Partecipante">
									#{audizione.soggettoPartecipante}
									</p:column>


				<p:column headerText="Previsto">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="si" rendered="#{audizione.previsto}" />
							<h:outputText value="no" rendered="#{!audizione.previsto}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{audizione.previsto}" />
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Discusso">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="si" rendered="#{audizione.discusso}" />
							<h:outputText value="no" rendered="#{!audizione.discusso}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{audizione.discusso}" />
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Elimina">

					<p:commandButton oncomplete="audizioneDialog.show()"
						icon="delete-icon">

						<f:setPropertyActionListener
							value="#{audizione.soggettoPartecipante}"
							target="#{gestioneSeduteController.audizioneToDelete}" />
					</p:commandButton>
				</p:column>

				<p:column headerText="Modifica">
					<p:rowEditor />
				</p:column>

			</p:dataTable>
		</p:fieldset>

	</p:column>
</p:row>



<p:fieldset styleClass="fieldSetTab"
	legend="Atti di Sindacato Ispettivo e di Indirizzo" collapsed="false"
	toggleable="false">
	<p:row>
		<p:column>
			<p:panelGrid id="addAttoSindacatoPanel" styleClass="tableAppend">
				<f:facet name="header">
					<p:row>
						<p:column>Tipo</p:column>
						<p:column>N. Atto</p:column>
						<p:column>Descrizione</p:column>
						<p:column>Azioni</p:column>
					</p:row>
				</f:facet>
				<p:row>


					<p:column>
						<p:selectOneMenu id="tipoAttoSindacato"
							value="#{gestioneSeduteController.tipoAttoSindacato}">
							<f:selectItem itemLabel="Scegli tipo Atto" itemValue="" />
							<f:selectItems
								value="#{gestioneSeduteController.tipiAttoSindacato}" />
							<p:ajax update="numAttoSindacato" global="false"
								listener="#{gestioneSeduteController.handleAttoSindacatoChange}" />
						</p:selectOneMenu>
					</p:column>


					<p:column>
						<p:selectOneMenu id="numAttoSindacato"
							value="#{gestioneSeduteController.idAttoSindacato}">
							<f:selectItem itemLabel="Scegli numero Atto" itemValue="" />
							<f:selectItems itemValue="#{attoSind.idAtto}" var="attoSind"
								value="#{gestioneSeduteController.numeriAttoSindacato}"
								itemLabel="#{attoSind.numeroAtto} - #{attoSind.oggettoAtto}" />
						</p:selectOneMenu>
					</p:column>

					<p:column>
						<p:inputText
							value="#{gestioneSeduteController.descrizioneAttoSindacato}"
							style="width:100%" />
					</p:column>


					<p:column>
						<p:commandButton value="Aggiungi"
							action="#{gestioneSeduteController.addCollegamentoAttoSindacato}"
							id="addCollegamentoAttoSindacato"
							update="listaCollegamentiAttiSindacati, inserisciOdgMsg"
							icon="new-icon" />
					</p:column>

				</p:row>

			</p:panelGrid>
			<br />

		</p:column>
	</p:row>

	<p:row style="height:20px">

	</p:row>

	<p:row>
		<p:column>

			<p:dataTable id="listaCollegamentiAttiSindacati"
				value="#{gestioneSeduteController.collegamentiAttiSindacato}"
				var="collegamento"  editable="true">

				<p:column headerText="Tipo Atto" style="width:125px">
							#{collegamento.tipoAtto}
    			</p:column>

				<p:column headerText="N.Atto" style="width:125px">
					#{collegamento.numeroAtto}
					
				</p:column>

				<p:column headerText="Oggetto" style="width:125px">
				#{collegamento.oggettoAtto}
			</p:column>

				<p:column headerText="Firmatari" style="width:125px">
				#{collegamento.firmatariList}
			</p:column>
			
			<p:column headerText="Descrizione" style="width:125px">
			#{collegamento.descrizione}
			</p:column>

				<p:column headerText="Azioni" style="width:125px">

					<p:commandButton
						oncomplete="collegamentoAttoSindacatoDialog.show()"
						icon="delete-icon">
						<f:setPropertyActionListener value="#{collegamento.idAtto}"
							target="#{gestioneSeduteController.attoSindacatoToDelete}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
			<p:inputText type="hidden" id="hidSindOrder"
				value="#{gestioneSeduteController.attiSindacatoTrattatiorder}">
			</p:inputText>

			<script>
				jQuery(function() {
					jQuery(
							'#gestioneSeduteForm\\:gestioneSedute\\:listaCollegamentiAttiSindacati_data')
							.sortable(
									{
										update : function() {
											dragSortTable(
													'gestioneSeduteForm:gestioneSedute:listaCollegamentiAttiSindacati_data',
													'gestioneSeduteForm:gestioneSedute:hidSindOrder',
													'2');
										}
									});
				});
			</script>
		</p:column>
	</p:row>
</p:fieldset>


</html>
