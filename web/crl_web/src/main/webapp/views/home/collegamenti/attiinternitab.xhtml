<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions">

<pe:tooltip value="Click per Espandere / Comprimere"
	forSelector="legend" shared="true" targetPosition="top center"
	position="left center" />




<p:fieldset legend="Atti Interni" toggleable="true" toggleSpeed="500">

	<!-- Messaggio azioni -->
	<p:growl id="attiInterniMsg" showDetail="true" sticky="false" />



	<!-- Confirm dialog -->
	<p:confirmDialog id="confirmCollegamentoDialog"
		message="Sei sicuro di voler eliminare il Collegamento ?"
		header="Cancellazione Collegamento" severity="alert"
		widgetVar="collegamentoDialog">

		<p:commandButton id="confirmCollegamento" value="Conferma"
			oncomplete="collegamentoDialog.hide()"
			action="#{collegamentiController.removeCollegamento}"
			update="listaCollegamenti" />
		<p:commandButton id="declineCollegamento" value="Annulla"
			onclick="collegamentoDialog.hide()" type="button" />

	</p:confirmDialog>

	<!-- Pannello ricerca -->

	<p:panelGrid
		style="width:100%;margin-bottom:7px;border:1px solid #4F4F4F;"
                id="serchPanel"
                rendered="#{not navigationBean.isCommissioneConsultiva()}">


		<f:facet name="header">
			<p:row>
				<p:column style="text-align:left" colspan="4">
						Ricerca Atto:
			    </p:column>
			</p:row>
		</f:facet>

		<p:row>
			<p:column>

				<div>

					<p:panelGrid style="width:100%;margin-bottom:7px;" id="searchPanel">




						<p:messages id="msgs" />

						<p:row>
							<p:column style="width: 20%;">
								<h:outputLabel for="tipoatto" value="Tipo atto: " />
							</p:column>

							<p:column style="width: 20%;">
								<p:selectOneMenu id="tipoatto"
									value="#{searchAttoController.tipoatto}">
									<f:selectItem itemLabel="Scegli Tipo" itemValue="" />
									<f:selectItems value="#{searchAttoController.tipiAtto}" />
								</p:selectOneMenu>
							</p:column>

							<p:column style="width: 20%;">
								<h:outputLabel for="legislatura" value="Legislatura: " />
							</p:column>

							<p:column style="width: 20%;">
								<p:selectOneMenu id="legislatura"
									value="#{searchAttoController.legislatura}">
									<f:selectItem itemLabel="Scegli Legislatura" itemValue="" />
									<f:selectItems value="#{searchAttoController.legislature}" />
								</p:selectOneMenu>
							</p:column>

							<p:column style="width: 20%;">
								<h:outputLabel for="stato" value="Stato: " />
								<p:selectOneMenu id="stato"
									value="#{searchAttoController.stato}">
									<f:selectItem itemLabel="Scegli Stato" itemValue="" />
									<f:selectItems value="#{searchAttoController.stati}" />
								</p:selectOneMenu>
							</p:column>
						</p:row>

						<p:row>
							<p:column style="width: 20%;">
								<h:outputLabel for="numeroatto" value="Numero Atto: " />
							</p:column>

							<p:column style="width: 20%;">
								<p:inputText id="numeroatto"
									value="#{searchAttoController.numeroAtto}"></p:inputText>
							</p:column>

							<p:column style="width: 20%;">
								<h:outputLabel value="Data Iniziativa " />
							</p:column>
							<p:column style="width: 20%;">
								<h:outputLabel for="datainiziativa_da" value="da: " />
								<p:calendar size="10" locale="it" id="datainiziativa_da"
									value="#{searchAttoController.dataIniziativaDa}" />
							</p:column>
							<p:column style="width: 20%;">
								<h:outputLabel for="datainiziativa_a" value="a: " />
								<p:calendar size="10" locale="it" id="datainiziativa_a"
									value="#{searchAttoController.dataIniziativaA}" />
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="numeroprotocollo"
									value="Numero Protocollo: " />
							</p:column>

							<p:column>
								<p:inputText id="numeroprotocollo"
									value="#{searchAttoController.numeroprotocollo}"></p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="tipoiniziativa" value="Tipo Iniziativa: " />
							</p:column>

							<p:column>
								<p:selectOneMenu id="tipoiniziativa"
									value="#{searchAttoController.tipoiniziativa}">
									<f:selectItem itemLabel="Scegli Tipo Iniziativa" itemValue="" />
									<f:selectItems value="#{searchAttoController.tipiIniziative}" />
								</p:selectOneMenu>
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="numerodcr" value="Numero DCR: " />
							</p:column>

							<p:column>
								<p:inputText id="numerodcr"
									value="#{searchAttoController.numerodcr}"></p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="primofirmatario" value="1Â° Firmatario: " />
							</p:column>

							<p:column>
								<p:selectOneMenu id="primofirmatario"
									value="#{searchAttoController.primofirmatario}">
									<f:selectItem itemLabel="Scegli Primo Firmatario" itemValue="" />
									<f:selectItems value="#{searchAttoController.firmatari}" />
								</p:selectOneMenu>
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputLabel for="oggetto" value="Oggetto: " />
							</p:column>

							<p:column>
								<p:inputText id="oggetto"
									value="#{searchAttoController.oggetto}"></p:inputText>
							</p:column>

							<p:column>
								<h:outputLabel for="firmatario" value="Firmatario: " />
							</p:column>

							<p:column>
								<p:selectOneMenu id="firmatario"
									value="#{searchAttoController.firmatario}">
									<f:selectItem itemLabel="Scegli Firmatario" itemValue="" />
									<f:selectItems value="#{searchAttoController.firmatari}" />
								</p:selectOneMenu>
							</p:column>
						</p:row>

					</p:panelGrid>

				</div>

				<div id="ricercaAvanzataDiv">

					<p:panelGrid style="width:100%;margin-bottom:7px;"
						id="RicercaAvanzataPanel">


						<p:row>
							<p:column style="width: 20%;">

								<h:outputLabel for="tipoChiusura" value="Tipo chiusura: " />

							</p:column>
							<p:column style="width: 20%;">

								<p:selectOneMenu id="tipoChiusura">
									<f:selectItem itemLabel="Scegli Tipo Chiusura" itemValue="" />
									<f:selectItems value="#{searchAttoController.tipiChiusura}" />
								</p:selectOneMenu>

							</p:column>
							<p:column style="width: 20%;">

								<h:outputLabel value="Data pubblicazione: " />



							</p:column>
							<p:column style="width: 20%;">
								<h:outputLabel for="dataPubblicazione_da" value="da: " />
								<p:calendar size="10" locale="it" id="dataPubblicazione_da" />
							</p:column>
							<p:column style="width: 20%;">
								<h:outputLabel for="dataPbblicazione_a" value="a: " />
								<p:calendar size="10" locale="it" id="dataPbblicazione_a" />
							</p:column>

						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="esitoVotoComRef"
									value="Esito voto Com.Ref: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="esitoVotoComRef">
									<f:selectItem
										itemLabel="Scegli Esito Voto Commissione Referente"
										itemValue="" />
									<f:selectItems
										value="#{searchAttoController.esitiVotoCommissioneReferente}" />
								</p:selectOneMenu>

							</p:column>
							<p:column>

								<h:outputLabel value="Data seduta S.C.: " />



							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaSC_da" value="da: " />
								<p:calendar size="10" locale="it" id="dataSedutaSC_da" />
							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaSC_a" value="a: " />
								<p:calendar size="10" locale="it" id="dataSedutaSC_a" />
							</p:column>

						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="esitoVotoAula" value="Esito voto Aula: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="esitoVotoAula">
									<f:selectItem itemLabel="Scegli Esito Voto Aula" itemValue="" />
									<f:selectItems value="#{searchAttoController.esitiVotoAula}" />
								</p:selectOneMenu>

							</p:column>
							<p:column>

								<h:outputLabel value="Data seduta. Comm: " />



							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaComm_da" value="da: " />
								<p:calendar size="10" locale="it" id="dataSedutaComm_da" />
							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaComm_a" value="a: " />
								<p:calendar size="10" locale="it" id="dataSedutaComm_a" />
							</p:column>

						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="commissioneReferente"
									value="Commissione Referente: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="commissioneReferente">
									<f:selectItem itemLabel="Scegli Commissione Referente"
										itemValue="" />
									<f:selectItems
										value="#{searchAttoController.commissioniReferenti}" />
								</p:selectOneMenu>

							</p:column>
							<p:column>

								<h:outputLabel value="Data seduta Aula: " />



							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaAula_da" value="da: " />
								<p:calendar size="10" locale="it" id="dataSedutaAula_da" />
							</p:column>
							<p:column>
								<h:outputLabel for="dataSedutaAula_a" value="a: " />
								<p:calendar size="10" locale="it" id="dataSedutaAula_a" />
							</p:column>

						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="commissioneConsultiva"
									value="Commissione Consultiva: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="commissioneConsultiva">
									<f:selectItem itemLabel="Scegli Commissione Consultiva"
										itemValue="" />
									<f:selectItems
										value="#{searchAttoController.commissioniConsultive}" />
								</p:selectOneMenu>

							</p:column>
							<p:column>

								<h:outputLabel for="relatore" value="Relatore: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="relatoreSearch">
									<f:selectItem itemLabel="Scegli Relatore" itemValue="" />
									<f:selectItems value="#{searchAttoController.relatori}" />
								</p:selectOneMenu>

							</p:column>
						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="redigente" value="Redigente: " />

								<p:selectBooleanCheckbox id="redigente" />
							</p:column>
							<p:column>

								<h:outputLabel for="deliberante" value="Deliberante: " />

								<p:selectBooleanCheckbox id="deliberante" />

							</p:column>
							<p:column>

								<h:outputLabel for="organismoStatutario"
									value="Organismo Statutario: " />

							</p:column>
							<p:column>

								<p:selectOneMenu id="organismoStatutario">
									<f:selectItem itemLabel="Scegli Organismo Statutario"
										itemValue="" />
									<f:selectItems
										value="#{searchAttoController.organismiStatutari}" />
								</p:selectOneMenu>

							</p:column>
						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="numeroLCR" value="Numero LCR: " />

								<p:inputText id="numeroLCR" size="5" maxlength="5" />
							</p:column>
							<p:column>



							</p:column>
							<p:column>

								<h:outputLabel for="soggettoConsultato"
									value="Soggetto consultato: " />

							</p:column>
							<p:column>

								<p:inputText id="soggettoConsultato" />


							</p:column>
						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="numeroLR" value="Numero LR: " />

								<p:inputText id="numeroLR" size="5" maxlength="5" />
							</p:column>
							<p:column>

								<h:outputLabel for="anno" value="Anno: " />
								<p:inputText id="anno" size="4" maxlength="4" />

							</p:column>
							<p:column>



							</p:column>
							<p:column>



							</p:column>
						</p:row>

						<p:row>
							<p:column>

								<h:outputLabel for="abbonamento" value="Abbonamento: " />

								<p:selectBooleanCheckbox id="abbonamento" />
							</p:column>
							<p:column>

								<h:outputLabel for="stralcio" value="Stralcio: " />
								<p:selectBooleanCheckbox id="stralcio" />

							</p:column>
							<p:column colspan="3">

								<h:outputLabel for="emendato" value="Emendato: " />
								<p:selectBooleanCheckbox id="emendato" />
									&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<h:outputLabel for="rinviato" value="Rinviato: " />
								<p:selectBooleanCheckbox id="rinviato" />
									&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<h:outputLabel for="sospeso" value="Sospeso: " />
								<p:selectBooleanCheckbox id="sospeso" />

							</p:column>

						</p:row>
						<p:row>
							<p:column colspan="2">

								<p:commandButton type="button" outcome="productDetail"
									value="Ricerca semplice"
									onclick="hidePanel('ricercaAvanzataDiv', 'ricercaAvanzataButton')">

								</p:commandButton>
							</p:column>
						</p:row>

					</p:panelGrid>

				</div>


				<p:panelGrid>


					<p:row>

						<p:column>
							<div id="ricercaAvanzataButton">
								<p:commandButton type="button" outcome="productDetail"
									value="Ricerca avanzata"
									onclick="showPanel('ricercaAvanzataDiv', 'ricercaAvanzataButton')" />
							</div>


						</p:column>
					</p:row>
					<p:row>
						<p:column colspan="3">

							<p:commandButton value="Cerca" update="listaAtti"
								id="btncercaatto_cerca"
								actionListener="#{searchAttoController.searchAtti()}" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<h:commandLink value="Esporta Excel" id="btncercaatto_exl">
								<p:dataExporter type="xls" target="listaAtti"
									fileName="lista_atti" />
							</h:commandLink>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<p:commandButton value="Reimposta" update="searchPanel"
								id="btncercaatto_reset" />



							<!-- 
					 
             <p:commandButton value="Ricerca Avanzata" update="listaAtti" id="btncercaatto_ricavnz"  actionListener="" />  
              
              <p:commandButton value="Reimposta" update="searchPanel" id="btncercaatto_reset" actionListener="" />
              
-->















						</p:column>


					</p:row>


					<!-- <h:outputText style="color: #BBBB">Qui Maschera di ricerca</h:outputText> -->

				</p:panelGrid>
			</p:column>
		</p:row>
	</p:panelGrid>

	<!-- Pannello ricerca end -->

        <c:if test="#{not navigationBean.isCommissioneConsultiva()}">
            <h3>Risultati ricerca</h3>
        </c:if>

	<p:dataTable id="listaAtti" var="atto"
		value="#{searchAttoController.listAtti}" rows="10"
		paginator="true"
		paginatorTemplate="{FirstPageLink} {PreviousPageLink} {NextPageLink}"
		paginatorAlwaysVisible="false" paginatorPosition="bottom" 
                rendered="#{not navigationBean.isCommissioneConsultiva()}">
		<p:column>
			<f:facet name="header">Tipo</f:facet>
			<h:outputText value="#{atto.tipo}" />
		</p:column>

		<p:column headerText="N.Atto">
			<c:set value="#{atto.id}" var="idAttoParam" />
			<p:commandLink
				action="#{searchAttoController.attoDetail(idAttoParam)}"
				update="listaAtti">
				<h:outputText value="#{atto.numeroAtto}" />
				<!-- <f:param name="numeroatto" value="#{atto.numeroAtto}" /> -->
			</p:commandLink>
		</p:column>
		<p:column headerText="NÂ° Protocollo">
			<h:outputText value="#{atto.numeroProtocollo}" />
		</p:column>
		<p:column headerText="Oggetto">
			<h:outputText value="#{atto.oggetto}" />
		</p:column>
		<p:column headerText="Azioni">
			<c:set value="#{atto.id}" var="idAttoParam" />
			<p:commandButton value="Collega" id="addAbbinamento"
				action="#{collegamentiController.addCollegamento(idAttoParam)}"
				update=":collegamentiForm:tabView:listaCollegamenti, :collegamentiForm:tabView:attiInterniMsg"
				icon="new-icon" />
		</p:column>
	</p:dataTable>

	<h3>Atti collegati</h3>


	<p:row>
		<p:column colspan="5">

			<p:dataTable id="listaCollegamenti"
				value="#{collegamentiController.attiCollegatiList}"
				var="collegamento" styleClass="generalInfoTab" editable="true">

				<p:column headerText="Tipo Atto" style="width:125px">
							#{collegamento.tipoAttoCollegato}
    			</p:column>

				<p:column headerText="N.Atto" style="width:125px">
					#{collegamento.numeroAttoCollegato}
				</p:column>

				<p:column headerText="Note" style="width:125px">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{collegamento.note}" />
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{collegamento.note}" style="width:100%">
								<p:ajax event="change"
									listener="#{collegamentiController.updateAttiInterniHandler}" />
							</p:inputText>
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Azioni" style="width:125px">

					<p:commandButton oncomplete="collegamentoDialog.show()"
						icon="delete-icon"  rendered="#{not navigationBean.isCommissioneConsultiva()}">
						<f:setPropertyActionListener value="#{collegamento.numeroAttoCollegato}"
							target="#{collegamentiController.collegamentoToDelete}" />
					</p:commandButton>
				</p:column>

				<p:column headerText="Modifica" style="width:50px">
					<p:rowEditor rendered="#{not navigationBean.isCommissioneConsultiva()}"/>
				</p:column>

			</p:dataTable>
		</p:column>
	</p:row>

	<p:row rendered="#{not navigationBean.isCommissioneConsultiva()}">
		<p:column>
			<br />
			<p:commandButton value="Salva Collegamenti"
				action="#{collegamentiController.salvaCollegamenti}" 
				update="attiInterniMsg"/>
		</p:column>
	</p:row>

</p:fieldset>



</html>