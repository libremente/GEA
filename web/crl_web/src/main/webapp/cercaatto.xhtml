<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">



<h:form id="insertattoform">

	<p:ajaxStatus onstart="statusDialog.show();"
		onsuccess="statusDialog.hide();" />

	<p:dialog modal="true" widgetVar="statusDialog" header="Caricamento"
		draggable="false" closable="false">
		<p:graphicImage value="resources/img/ajax_loading_bar.gif" />
	</p:dialog>




	<p:confirmDialog id="confirmTableDialog"
		message="Scegli Colonne da visualizzare" header="Layout lista"
		widgetVar="tableDialog" style="">
		<p:scrollPanel style="width:250px;height:250px">
			<p:dataTable id="listaColonne" var="col"
				value="#{userBean.colonneTotali}">
				<p:column>
					<f:facet name="header">Nome</f:facet>
					<h:outputText value="#{col.nome}" />
				</p:column>

				<c:set
					value="#{(col.attoProperty ne 'numeroAtto') or (col.attoProperty ne 'tipo')}"
					var="readonly">
				</c:set>

				<p:column>
					<f:facet name="header">Visibile</f:facet>
					<p:selectBooleanCheckbox rendered="#{readonly}"
						value="#{col.visible}"></p:selectBooleanCheckbox>
				</p:column>


			</p:dataTable>
		</p:scrollPanel>
		<p:commandButton id="confirmCommissione" value="Salva"
			oncomplete="tableDialog.hide()"
			action="#{userBean.refreshColonneUser}" update="listaAtti" />


		<p:commandButton id="declineCommissione" value="Annulla"
			onclick="tableDialog.hide()" type="button" />

	</p:confirmDialog>


	<p:panel style="text-align:left;margin-bottom:5px;font-size:12px"
		id="mainPanel">


		<!-- Pannello ricerca -->

		<p:panelGrid
			style="width:100%;margin-bottom:7px;border:1px solid #4F4F4F;"
			id="globalPanel">

			<f:facet name="header">
				<p:row>
					<p:column style="text-align:left" colspan="4">
						Ricerca Atto:
			    </p:column>
				</p:row>
			</f:facet>

			<p:row>
				<p:column>

					<div>

						<p:panelGrid style="width:100%;margin-bottom:7px;"
							id="searchPanel">

							<p:messages id="msgs" />

							<p:row>
								<p:column style="width: 20%;">
									<h:outputLabel for="tipoatto" value="Tipo atto: " />
								</p:column>

								<p:column style="width: 20%;">
									<p:selectOneMenu id="tipoatto"
										value="#{searchAttoController.tipoatto}">
										<f:selectItem itemLabel="Scegli Tipo" itemValue="" />
										<f:selectItems value="#{searchAttoController.tipiAtto}" />
									</p:selectOneMenu>
								</p:column>

								<p:column style="width: 20%;">
									<h:outputLabel for="legislatura" value="Legislatura: " />
								</p:column>

								<p:column style="width: 20%;">
									<p:selectOneMenu id="legislatura"
										value="#{searchAttoController.legislatura}">
										<!-- <f:selectItem itemLabel="Scegli Legislatura" itemValue="" /> -->
										<f:selectItems value="#{searchAttoController.legislature}" />
									</p:selectOneMenu>
								</p:column>

								<p:column style="width: 20%;">
									<h:outputLabel for="stato" value="Stato: " />
									<p:selectOneMenu id="stato"
										value="#{searchAttoController.stato}">
										<f:selectItem itemLabel="Scegli Stato" itemValue="" />
										<f:selectItems value="#{searchAttoController.stati}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>

							<p:row>
								<p:column style="width: 20%;">
									<h:outputLabel for="numeroatto" value="Numero Atto: " />
								</p:column>

								<p:column style="width: 20%;">
									<p:inputText id="numeroatto"
										value="#{searchAttoController.numeroAtto}"></p:inputText>
								</p:column>

								<p:column style="width: 20%;">
									<h:outputLabel value="Data Iniziativa " />
								</p:column>
								<p:column style="width: 20%;">
									<h:outputLabel for="datainiziativa_da" value="da: " />
									<p:calendar size="10" locale="it" id="datainiziativa_da"
										value="#{searchAttoController.dataIniziativaDa}" />
								</p:column>
								<p:column style="width: 20%;">
									<h:outputLabel for="datainiziativa_a" value="a: " />
									<p:calendar size="10" locale="it" id="datainiziativa_a"
										value="#{searchAttoController.dataIniziativaA}" />
								</p:column>
							</p:row>

							<p:row>
								<p:column>
									<h:outputLabel for="numeroprotocollo"
										value="Numero Fascicolo : " />
								</p:column>

								<p:column>
									<p:inputText id="numeroprotocollo"
										value="#{searchAttoController.numeroprotocollo}"></p:inputText>
								</p:column>

								<p:column>
									<h:outputLabel for="tipoiniziativa" value="Tipo Iniziativa: " />
								</p:column>

								<p:column>
									<p:selectOneMenu id="tipoiniziativa"
										value="#{searchAttoController.tipoiniziativa}">
										<f:selectItem itemLabel="Scegli Tipo Iniziativa" itemValue="" />
										<f:selectItem itemLabel="Consiliare" itemValue="Consiliare" />
										<f:selectItem itemLabel="Popolare" itemValue="Popolare" />
										<f:selectItem itemLabel="d'Ufficio" itemValue="d'Ufficio" />
										<f:selectItem itemLabel="Consiglio delle Autonomie locali"
											itemValue="Consiglio delle Autonomie locali" />
										<f:selectItem itemLabel="Presidente della Giunta"
											itemValue="Presidente della Giunta" />
										<f:selectItem itemLabel="Giunta" itemValue="Giunta" />
										<f:selectItem itemLabel="Commissione europea"
											itemValue="Commissione europea" />
									</p:selectOneMenu>
								</p:column>
							</p:row>

							<p:row>
								<p:column>
									<h:outputLabel for="numerodcr" value="Numero DCR: " />
								</p:column>

								<p:column>
									<p:inputText id="numerodcr"
										value="#{searchAttoController.numerodcr}"></p:inputText>
								</p:column>

								<p:column>
									<h:outputLabel for="primofirmatario" value="1Â° Firmatario: " />
								</p:column>

								<p:column>
									<p:selectOneMenu id="primofirmatario"
										value="#{searchAttoController.primofirmatario}">
										<f:selectItem itemLabel="Scegli Primo Firmatario" itemValue="" />
										<f:selectItems value="#{searchAttoController.firmatari}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>

							<p:row>
								<p:column>
									<h:outputLabel for="oggetto" value="Oggetto: " />
								</p:column>

								<p:column>
									<p:inputText id="oggetto"
										value="#{searchAttoController.oggetto}"></p:inputText>
								</p:column>

								<p:column>
									<h:outputLabel for="firmatario" value="Firmatario: " />
								</p:column>

								<p:column>
									<p:selectOneMenu id="firmatario"
										value="#{searchAttoController.firmatario}">
										<f:selectItem itemLabel="Scegli Firmatario" itemValue="" />
										<f:selectItems value="#{searchAttoController.firmatari}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>

						</p:panelGrid>

					</div>

					<div id="ricercaAvanzataDiv">

						<p:panelGrid style="width:100%;margin-bottom:7px;"
							id="RicercaAvanzataPanel">


							<p:row>
								<p:column style="width: 20%;">

									<h:outputLabel for="tipoChiusura" value="Tipo chiusura: " />

								</p:column>
								<p:column style="width: 20%;">

									<p:selectOneMenu id="tipoChiusura" value="#{searchAttoController.tipoChiusura}">
										<f:selectItem itemLabel="Scegli Tipo Chiusura" itemValue="" />
										<f:selectItem itemLabel="Pubblicato" itemValue="Pubblicato" />
										<f:selectItem itemLabel="Approvato e Trasmesso alla Giunta"
											itemValue="Approvato e Trasmesso alla Giunta" />

										<f:selectItem itemLabel="Respinto" itemValue="Respinto" />
										<f:selectItem itemLabel="Rifiutato e trasmesso alla Giunta"
											itemValue="Rifiutato e trasmesso alla Giunta" />
										<f:selectItem itemLabel="Inammissibile"
											itemValue="Inammissibile" />

										<f:selectItem itemLabel="Ritirato dai promotori"
											itemValue="Ritirato dai promotori" />
										<f:selectItem itemLabel="Abbinato ad altro atto"
											itemValue="Abbinato ad altro atto" />
										<f:selectItem itemLabel="Per decadenza (fine legislatura)"
											itemValue="Per decadenza (fine legislatura)" />
										<f:selectItem itemLabel="Per motivi diversi"
											itemValue="Per motivi diversi" />
									</p:selectOneMenu>

								</p:column>
								<p:column style="width: 20%;">

									<h:outputLabel value="Data pubblicazione: " />



								</p:column>
								<p:column style="width: 20%;">
									<h:outputLabel for="dataPubblicazione_da" value="da: " />
									<p:calendar  size="10" locale="it" id="dataPubblicazione_da" 
									value="#{searchAttoController.dataPubblicazioneDa}" />
								</p:column>
								<p:column style="width: 20%;">
									<h:outputLabel for="dataPbblicazione_a" value="a: " />
									<p:calendar size="10" locale="it" id="dataPbblicazione_a" 
									value="#{searchAttoController.dataPubblicazioneA}"/>
								</p:column>

							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="esitoVotoComRef"
										value="Esito voto Com.Ref: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="esitoVotoComRef" 
									value="#{searchAttoController.esitoVotoCommissioneReferente}">
										<f:selectItem
											itemLabel="Scegli Esito Voto Commissione Referente"
											itemValue="" />
										<f:selectItem itemLabel="Deliberato" itemValue="Deliberato" />

										<f:selectItem itemLabel="Non Deliberato"
											itemValue="Non Deliberato" />

										<f:selectItem itemLabel="Proposto non passaggio all'esame"
											itemValue="Proposto non passaggio all'esame" />

										<f:selectItem itemLabel="Archiviazione"
											itemValue="Archiviazione" />

										<f:selectItem itemLabel="Proposta di RIS"
											itemValue="Proposta di RIS" />

										<f:selectItem itemLabel="Approvato" itemValue="Approvato" />

										<f:selectItem itemLabel="Presa d'atto "
											itemValue="Presa d'atto" />
									</p:selectOneMenu>

								</p:column>
								<p:column>

									<h:outputLabel value="Data seduta S.C.: " />



								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaSC_da" value="da: " />
									<p:calendar size="10" locale="it" id="dataSedutaSC_da" 
									value="#{searchAttoController.dataSedutaSCDa}"/>
								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaSC_a" value="a: " />
									<p:calendar size="10" locale="it" id="dataSedutaSC_a"
									value="#{searchAttoController.dataSedutaSCA}" />
								</p:column>

							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="esitoVotoAula" value="Esito voto Aula: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="esitoVotoAula" value="#{searchAttoController.esitoVotoAula}">
										<f:selectItem itemLabel="Scegli Esito Voto Aula" itemValue="" />
										<f:selectItem itemLabel="Approvato" itemValue="Approvato" />
										<f:selectItem itemLabel="Approvato non passaggio all'esame"
											itemValue="Approvato non passaggio all'esame" />
										<f:selectItem itemLabel="Respinto dall'aula"
											itemValue="Respinto dall'aula" />
									</p:selectOneMenu>

								</p:column>
								<p:column>

									<h:outputLabel value="Data seduta. Comm: " />



								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaComm_da" value="da: " />
									<p:calendar size="10" locale="it" id="dataSedutaComm_da" 
									value="#{searchAttoController.dataSedutaCommissioneDa}" />
								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaComm_a" value="a: " />
									<p:calendar size="10" locale="it" id="dataSedutaComm_a" 
									value="#{searchAttoController.dataSedutaCommissioneA}" />
								</p:column>

							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="commissioneReferente"
										value="Commissione Referente: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="commissioneReferente"  
									value="#{searchAttoController.commissioneReferente}">
										<f:selectItem itemLabel="Scegli Commissione Referente"
											itemValue="" />
										<f:selectItems
											value="#{searchAttoController.commissioniReferenti}" />
									</p:selectOneMenu>

								</p:column>
								<p:column>

									<h:outputLabel value="Data seduta Aula: " />



								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaAula_da" value="da: " />
									<p:calendar size="10" locale="it" id="dataSedutaAula_da" 
									value="#{searchAttoController.dataSedutaAulaDa}" />
								</p:column>
								<p:column>
									<h:outputLabel for="dataSedutaAula_a" value="a: " />
									<p:calendar size="10" locale="it" id="dataSedutaAula_a" 
									value="#{searchAttoController.dataSedutaAulaA}" />
								</p:column>

							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="commissioneConsultiva"
										value="Commissione Consultiva: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="commissioneConsultiva" 
									value="#{searchAttoController.commissioneConsultiva}" >
										<f:selectItem itemLabel="Scegli Commissione Consultiva"
											itemValue="" />
										<f:selectItems
											value="#{searchAttoController.commissioniConsultive}" />
									</p:selectOneMenu>

								</p:column>
								<p:column>

									<h:outputLabel for="relatore" value="Relatore: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="relatore" 
									value="#{searchAttoController.relatore}"  >
										<f:selectItem itemLabel="Scegli Relatore" itemValue="" />
										<f:selectItems value="#{searchAttoController.relatori}" />
									</p:selectOneMenu>

								</p:column>
							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="redigente" value="Redigente: " />

									<p:selectBooleanCheckbox id="redigente" value="#{searchAttoController.redigente}" />
								</p:column>
								<p:column>

									<h:outputLabel for="deliberante" value="Deliberante: " />

									<p:selectBooleanCheckbox id="deliberante" value="#{searchAttoController.deliberante}"  />

								</p:column>
								<p:column>

									<h:outputLabel for="organismoStatutario"
										value="Organismo Statutario: " />

								</p:column>
								<p:column>

									<p:selectOneMenu id="organismoStatutario" 
									value="#{searchAttoController.organismoStatutario}" >
										<f:selectItem itemLabel="Scegli Organismo Statutario"
											itemValue="" />
										<f:selectItems
											value="#{searchAttoController.organismiStatutari}" 
											 />
									</p:selectOneMenu>

								</p:column>
							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="numeroLCR" value="Numero LCR: " />

									<p:inputText id="numeroLCR" size="5" maxlength="5" 
									value="#{searchAttoController.numeroLCR}" />
								</p:column>
								<p:column>



								</p:column>
								<p:column>

									<h:outputLabel for="soggettoConsultato"
										value="Soggetto consultato: " />

								</p:column>
								<p:column>

									<p:inputText id="soggettoConsultato" 
									value="#{searchAttoController.soggettoConsultato}" />


								</p:column>
							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="numeroLR" value="Numero LR: " />

									<p:inputText id="numeroLR" size="5" maxlength="5" 
									value="#{searchAttoController.numeroLR}" />
								</p:column>
								<p:column>

									<h:outputLabel for="anno" value="Anno: " />
									<p:inputText id="anno" size="4" maxlength="4" 
									value="#{searchAttoController.anno}" />

								</p:column>
								<p:column>



								</p:column>
								<p:column>



								</p:column>
							</p:row>

							<p:row>
								<p:column>

									<h:outputLabel for="abbonamento" value="Abbinamento: " />

									<p:selectBooleanCheckbox id="abbonamento" value="#{searchAttoController.abbinamento}" />
								</p:column>
								<p:column>

									<h:outputLabel for="stralcio" value="Stralcio: " />
									<p:selectBooleanCheckbox id="stralcio" 
									value="#{searchAttoController.stralcio}" />

								</p:column>
								<p:column colspan="3">

									<h:outputLabel for="emendato" value="Emendato: " />
									<p:selectBooleanCheckbox id="emendato" value="#{searchAttoController.emendato}" />
									&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<h:outputLabel for="rinviato" value="Rinviato: " />
									<p:selectBooleanCheckbox id="rinviato" value="#{searchAttoController.rinviato}" />
									&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<h:outputLabel for="sospeso" value="Sospeso: " />
									<p:selectBooleanCheckbox id="sospeso" value="#{searchAttoController.sospeso}" />

								</p:column>

							</p:row>
							<p:row>
								<p:column>

									<p:commandButton type="button" outcome="productDetail"
										value="Ricerca semplice"
										onclick="hidePanel('ricercaAvanzataDiv', 'ricercaAvanzataButton')">

									</p:commandButton>
								</p:column>
							</p:row>

						</p:panelGrid>

					</div>


					<p:panelGrid>


						<p:row>

							<p:column>
								<div id="ricercaAvanzataButton">
									<p:commandButton type="button" outcome="productDetail"
										value="Ricerca avanzata"
										onclick="showPanel('ricercaAvanzataDiv', 'ricercaAvanzataButton')" />
								</div>


							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="3">

								<p:commandButton value="Cerca" update="listaAtti"
									id="btncercaatto_cerca"
									actionListener="#{searchAttoController.searchAtti}" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<h:commandLink value="Esporta Excel" id="btncercaatto_exl">
									<p:dataExporter type="xls" target="listaAtti"
										postProcessor="#{searchAttoController.postProcessXLS}"
										fileName="lista_atti" />
								</h:commandLink>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<p:commandButton value="Reimposta" update="searchPanel"
									id="btncercaatto_reset" />



							</p:column>


						</p:row>

					</p:panelGrid>
				</p:column>
			</p:row>
		</p:panelGrid>


		<p:panelGrid id="listaLavoroPanel"
			style="width:100%;margin-bottom:7px;border:1px solid #4F4F4F">

			<p:row>
				<p:column>
					<h:outputLabel for="listaLavoro" value="Lista di Lavoro : "
						style="valign:middle" />
					<p:selectOneMenu id="listaLavoro"
						value="#{searchAttoController.listaLavoro}">
						<f:selectItem itemLabel="Tutti gli Atti" itemValue="tutti" />
						<f:selectItem itemLabel="In lavorazione" itemValue="inlavorazione" />
						<f:selectItem itemLabel="Lavorati" itemValue="lavorati" />
					</p:selectOneMenu>

				</p:column>
			</p:row>

		</p:panelGrid>





		<!-- Pannello ricerca end -->




		<p style="text-align: right">

			<p:graphicImage style="cursor: hand; cursor: pointer; " height="30"
				width="30" value="resources/img/columns.jpeg"
				onclick="tableDialog.show()" />
		</p>


		<p:dataTable id="listaAtti" var="atto"
			value="#{searchAttoController.listAtti}" rows="10" paginator="true"
			paginatorTemplate="{FirstPageLink} {PreviousPageLink} {NextPageLink}"
			paginatorAlwaysVisible="false" paginatorPosition="bottom">
			<p:column sortBy="#{atto.tipo}">
				<f:facet name="header">Tipo</f:facet>
				<h:outputText value="#{atto.tipo}" />
			</p:column>

			<p:column headerText="N.Atto" sortBy="#{atto.numeroAtto}">
				<c:set value="#{atto.id}" var="idAttoParam" />
                <c:set value="#{atto.tipo}" var="tipoAttoParam" />
				<p:commandLink
					action="#{searchAttoController.attoDetail(idAttoParam,tipoAttoParam)}"
					update="listaAtti">
					<h:outputText value="#{atto.numeroAtto}" />
				</p:commandLink>
			</p:column>

			<p:columns value="#{userBean.colonneUser}" var="column"
				columnIndexVar="colIndex" sortBy="#{atto[column.attoProperty]}">



				<f:facet name="header">  
                #{column.nome}  
            </f:facet>

				<h:outputText value="#{atto[column.attoProperty]}" />

			</p:columns>


			<!-- <p:column headerText="Oggetto" sortBy="#{atto.oggetto}">
				<h:outputText value="#{atto.oggetto}" />
			</p:column>
			<p:column headerText="1 Firmatario" sortBy="#{atto.primoFirmatario}">
				<h:outputText value="#{atto.primoFirmatario}" />
			</p:column>
			<p:column headerText="Data Presentazione"
				sortBy="#{atto.dataPresentazione}">
				<h:outputText value="#{atto.dataPresentazione}" />
			</p:column>
			<p:column headerText="Stato" sortBy="#{atto.stato}">
				<h:outputText value="#{atto.stato}" />
			</p:column>
			<p:column headerText="Alert">
				<h:outputText value="" />
			</p:column>
			<p:column headerText="Azioni">
				<c:set value="#{atto.id}" var="idAttoParam" />
				<p:commandLink
					action="#{searchAttoController.attoDetail(idAttoParam)}"
					update="listaAtti">
					<h:graphicImage value="/resources/img/show.png" />
				</p:commandLink>
			</p:column> -->
		</p:dataTable>

	</p:panel>
</h:form>

</html>